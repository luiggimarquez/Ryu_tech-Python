{% extends "mensajeria/index.html" %}

{% load static %}

{% block content %}

    <h2>Usuarios Ryu Tech - Profiles</h2>

    {% for message in messages %}
        {% if message.tags == 'error' %}
            <div class="alert alert-{{ message.tags }}">{{ message}}</div>
        {% endif %}
    {% endfor %}

    <div class="mainContainer">
    {% for data in usuarios %}
    
       {% if data.user.username != request.user.username%}
            <div class="containerProfiles">
                <div class="userContainer">
                    <div class="subcontainer1">
                        <div class="padding"><strong>{{data.user.username|capfirst}}</strong></div>
                        {% if canDelete %}
                        <div>
                        
                            <form method="POST" action="{% url 'deleteuser' data.user_id %}">
                                {% csrf_token %}
                                <button class="buttonDeleteUser">Eliminar</button>
                            </form>
                            
                        </div>
                        {% endif %}

                    </div>
                    <div class="subcontainer2">
                        <div class="padding">{{data.user.email}}</div>  
                    </div>
                    <div class="subcontainer3">
                        <div>
                            {% if data.avatar%}
                                <img src="{{data.avatar.url}}" class="imgProfileChat">
                            {% else %}
                                <img src="{% static 'images/no-avatar.jpg' %}" class="imgProfileChat">
                            {% endif %}
                        </div>
                        {% if canDelete %}
                        <div class="userPermission">
                            <form method="POST" action="" class="formPermission">
                                {% csrf_token %}
                              
                                <label for="permiso">Seleccionar permiso:</label>
                                <select name="permiso" id="permiso">
                                  <option value="can_view">Ver</option>
                                  <option value="can_edit">Editar</option>
                                  <option value="can_delete">Eliminar</option>
                                </select>
                              
                                <input type="submit" value="Asignar">
                            </form>
                        </div>
                        {% endif %}
                        <div class="padding">

                            <button class="button">
                                <a href="{% url 'chatroom-getmsgs' data.user_id %}" class="link">Enviar Mensaje</a>
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        {% endif %} 
        

    {% endfor %}

    </div>

{% endblock %}